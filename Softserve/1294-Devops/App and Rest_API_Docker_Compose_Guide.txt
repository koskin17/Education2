
–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Rest API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Docker Compose

---

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –≤–∞—à–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- Git (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤);
- Docker –∏ Docker Compose.

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–æ–∫:
```
git --version
docker --version
docker-compose --version
```

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git:
  ```
  sudo apt update
  sudo apt install git -y
  ```
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker:
  ```
  sudo apt update
  sudo apt install -y docker.io
  sudo systemctl start docker
  sudo systemctl enable docker
  ```
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose:
  ```
  sudo curl -L "https://github.com/docker/compose/releases/download/2.20.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
  sudo chmod +x /usr/local/bin/docker-compose
  docker-compose --version
  ```

---

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `projects`):
   ```
   mkdir ~/projects && cd ~/projects
   ```

2. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –æ–±–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
   ```
   git clone git@github.com:DevOps2-Fundamentals/react-app-koskin17.git frontend
	git clone git@github.com:DevOps2-Fundamentals/python-app-koskin17.git backend
   ```

   –ó–∞–º–µ–Ω–∏—Ç–µ `<URL_–í–ê–®–ï–ì–û_FRONTEND_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>` –∏ `<URL_–í–ê–®–ï–ì–û_BACKEND_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>` –Ω–∞ —Å—Å—ã–ª–∫–∏ –≤–∞—à–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã:
   ```
   ls
   ```
   –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–≤–µ –ø–∞–ø–∫–∏ —Å –≤–∞—à–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

---

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Compose –¥–ª—è Rest API
–°–æ–∑–¥–∞–¥–∏–º –æ–±—â–∏–π —Ñ–∞–π–ª `docker-compose.yml` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ backend –∏ frontend.

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `~/projects`:
   ```
   cd ~/projects
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `docker-compose.yml`:
   ```
   nano docker-compose.yml
   ```

3. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

   ```yaml
   version: '3.8'

   services:
     backend:
       build:
         context: ./<backend_directory>
         dockerfile: Dockerfile
       ports:
         - "8000:8000"
       volumes:
         - ./<backend_directory>:/app
       depends_on:
         - db
       environment:
         - DATABASE_URL=postgresql://user:password@db:5432/app_db

     frontend:
       build:
         context: ./<frontend_directory>
         dockerfile: Dockerfile
       ports:
         - "3000:3000"
       volumes:
         - ./<frontend_directory>:/app
       depends_on:
         - backend

     db:
       image: postgres:15
       environment:
         POSTGRES_USER: user
         POSTGRES_PASSWORD: password
         POSTGRES_DB: app_db
       volumes:
         - db_data:/var/lib/postgresql/data

   volumes:
     db_data:
   ```

   –ó–∞–º–µ–Ω–∏—Ç–µ `<backend_directory>` –∏ `<frontend_directory>` –Ω–∞ –∏–º–µ–Ω–∞ –ø–∞–ø–æ–∫ –≤–∞—à–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∑–∞–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª (`Ctrl+O`, –∑–∞—Ç–µ–º `Ctrl+X`).

---

### 4. –°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

#### Backend
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend:
   ```
   cd ~/projects/<backend_directory>
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Dockerfile`:
   ```
   nano Dockerfile
   ```

3. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```dockerfile
   FROM python:3.10-slim

   WORKDIR /app

   COPY requirements.txt /app/
   RUN pip install --no-cache-dir -r requirements.txt

   COPY . /app/

   CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
   ```

4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `requirements.txt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

---

#### Frontend
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é frontend:
   ```
   cd ~/projects/<frontend_directory>
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Dockerfile`:
   ```
   nano Dockerfile
   ```

3. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```dockerfile
   FROM node:18

   WORKDIR /app

   COPY package.json /app/
   RUN npm install

   COPY . /app/

   CMD ["npm", "start"]
   ```

4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `package.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.

---

### 5. –ó–∞–ø—É—Å–∫ Docker Compose
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å `docker-compose.yml`:
   ```
   cd ~/projects
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```
   docker-compose up --build
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
   - Backend: [http://localhost:8000](http://localhost:8000)
   - Frontend: [http://localhost:3000](http://localhost:3000)

---

### 6. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

#### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied" –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥ Docker
- –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É Docker:
  ```
  sudo usermod -aG docker $USER
  ```
  –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É.

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
  ```
  docker-compose logs <service_name>
  ```

#### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã `Dockerfile`, `requirements.txt`, `package.json` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 3000 –∏ 8000 –Ω–µ –∑–∞–Ω—è—Ç—ã.

---

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º, –ø–∏—à–∏—Ç–µ, –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è! üòä
